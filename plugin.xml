<?xml version="1.0" encoding="utf-8"?>
<plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
        id="cordova-plugin-card-camera"
        version="1.0.0">

  <name>Card Camera</name>

  <engines>
    <engine name="cordova" version=">=7.1.0"/>
    <engine name="cordova-android" version=">=7.0.0"/>
  </engines>

  <author email="talentedguy15@gmail.com">Polaris</author>

  <asset src="www/card-camera.js" target="js/card-camera.js"/>

  <js-module src="www/card-camera.js" name="cardcamera">
    <clobbers target="cardcamera" />
  </js-module>

  <platform name="android"
            kotlin="1.3.50">
    <!-- Add Kotlin support -->
    <hook type="after_plugin_add" src="hooks/support-kotlin.js" />
    <hook type="after_platform_add" src="hooks/support-kotlin.js" />
    <!-- <hook type="after_plugin_install" src="hooks/addResourcesClassImport.js" />
    <hook type="after_prepare" src="hooks/addResourcesClassImport.js" /> -->

    <framework src="org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.50" />
    <apply-plugin>kotlin-android-extensions</apply-plugin>
    <apply-plugin>kotlin-kapt</apply-plugin>

    <!-- Cleanup Kotlin source on uninstall -->
    <hook type="before_plugin_rm" src="hooks/on-uninstall.js" />
    <hook type="before_plugin_uninstall" src="hooks/on-uninstall.js" />

    <config-file target="config.xml" parent="/*">
      <feature name="CardCamera">
        <param name="android-package" value="cordova.plugin.cardcamera.CardCamera"/>
      </feature>
    </config-file>
    <config-file target="AndroidManifest.xml" parent="/*">
      <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
      <uses-permission android:name="android.permission.CAMERA" />
      <uses-feature android:name="android.hardware.camera" />
      <uses-feature android:name="android.hardware.camera.autofocus" />
    </config-file>
    <config-file target="AndroidManifest.xml" parent="application">
      <activity android:name="cordova.plugin.cardcamera.CardCameraActivity"
        android:label="@string/app_name" android:style="@style/MaterialTheme">
      </activity>
    </config-file>

    <source-file src="src/android/CardCamera.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/CardCameraActivity.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/CardCameraFragment.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/ActivityExtensions.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/AutoFitTextureView.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/CompareSizesByArea.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/ConfirmationDialog.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/Constants.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/ErrorDialog.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>
    <source-file src="src/android/ImageSaver.kt" target-dir="app/src/main/java/cordova/plugin/cardcamera"/>

    <resource-file src="src/android/res" target="res" />
    <framework src="src/android/build-extras.gradle" custom="true" type="gradleReference"/>
  </platform>
</plugin>
